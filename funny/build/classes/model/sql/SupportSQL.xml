<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SupportSQL">
    <insert id="insertREG" parameterType="SupportREGDTO">
  		  	Insert INTO support_regular VALUES ((select NVL(MAX(regular_number),0)+1 FROM support_regular), #{supporter_id}, #{regular_amount},#{regular_bank},#{regular_account},#{regular_paymentDate},#{regular_date},default)
    </insert>
    <insert id="insertTEM" parameterType="SupportTEMDTO">
  		 	Insert INTO support_temporary VALUES ((select NVL(MAX(temporary_number),0)+1 FROM support_temporary), #{supporter_id}, #{temporary_amount}, to_char(sysdate, 'yyyy/mm/dd hh24:mi'))
    </insert>
    <update id="setREGEnd" parameterType="string">
    		UPDATE support_regular SET regular_end = to_char(sysdate, 'yyyy/mm/dd') WHERE supporter_id = #{supporter_id}
    </update>
    
   	<!-- login -->
    <select id="SupportREGEndCheck" parameterType="string" resultType="string">
    		SELECT regular_end FROM support_regular WHERE supporter_id = #{supporter_id}
    </select> 

   	<!-- my page -->
    <select id="mypageREG" parameterType="SupporterDTO" resultType="SupportREGDTO">
		SELECT * FROM support_regular WHERE supporter_id = #{supporter_id}   
	</select>     
    <select id="mypageTEM" parameterType="SupporterDTO" resultType="SupportTEMDTO">
    	SELECT * from support_temporary where supporter_id=#{supporter_id} order by temporary_number desc
    </select> 
    
   	<!-- 관리자 페이지 -->
</mapper>